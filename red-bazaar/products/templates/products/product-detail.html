{% extends "base.html" %}

{% comment %}
 Set the name of the page 
{% endcomment %}
{% block page_title %}
{{ product.name}} details
{% endblock page_title %}

{% comment %}
 Inject extra links into the page header
{% endcomment %}
{% block extra_head %}
{% endblock extra_head %}


{% comment %}
 CSS tag injection 
{% endcomment %}
{% block css_inpage %}
{% endblock css_inpage %}

{% comment %}
 Inject HTML for the content 
{% endcomment %}
{% block content %}
<div class="container mt-4">
    <h1 class="text-center">{{ product.name }}</h1>
    <div class="row">
        <div class="col-md-6">
            <img src="{{ product.image }}" class="img-fluid" alt="{{ product.name }}">
        </div> 
        <div class="col-md-6">
              <h2>Details</h2>
              <p><strong>Supplier:</strong> {{ product.seller_id }}</p>
              <p><strong>Price:</strong> ${{ product.price }}</p>
              <p><strong>Quantity:</strong> {{ product.quantity }}</p>
              <p><strong>Description:</strong> {{ product.description }}</p>
              <p><strong>Rating:</strong> {{ product.rating }}</p>

              <!-- Quantity Input -->
              <label for="quantity">Select Quantity:</label>
              <input type="number" name="quantity" id="quantity" min="1" max="{{ product.quantity }}" value="1">
              
              <!-- Add to basket -->
              <a href="{% url 'products:add-cart' product.id 1 %}" id="addToCartBtn" class="btn btn-secondary">
                  Add to basket
              </a>

            </div>
            <!-- BotÃ³n para regresar a la lista de productos -->
            <a href="{% url 'products:all' %}" class="btn btn-secondary">Back to Product List</a>
        </div>
</div>
{% endblock %}

{% comment %}
 To the bottom of the body tag 
{% endcomment %}
{% block extrabody %}
{% endblock extrabody %}


{% comment %}
 JS tag injection 
{% endcomment %}
{% block js_inpage %}
document.getElementById('quantity').addEventListener('input', function() {
    // Gets the selected Quantity
    var quantity = document.getElementById('quantity').value;
    
    // Update the href with the new quantity
    var addToCartBtn = document.getElementById('addToCartBtn');
    var productId = "{{ product.id }}";
    addToCartBtn.href = "{% url 'products:add-cart' product.id 1 %}".replace('1', quantity);
});
{% endblock js_inpage %}