{% extends "base.html" %}

{% comment %}
 Set the name of the page 
{% endcomment %}
{% block page_title %}
Shopping Cart for {{ user.username }}
{% endblock page_title %}

{% comment %}
 Inject extra links into the page header
{% endcomment %}
{% block extra_head %}
{% endblock extra_head %}


{% comment %}
 CSS tag injection 
{% endblock css_inpage %}

{% comment %}
 Inject HTML for the content 
{% endcomment %}
{% block content %}
    <h2>Your Shopping Cart</h2>

    {% if products %}
        <table>
            <thead>
                <tr>
                    <th>Product Name</th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Subtotal</th>
                </tr>
            </thead>
            <tbody>
                {% for product in products %}
                <tr>
                    <td>{{ product.product.name }}</td>
                    <td>{{ product.product.price }}</td>
                    <td>{{product.quantity}}</td> <!-- Mostrar la cantidad de cada producto -->
                    <td>{{ product.subtotal }}</td> <!-- Calcular subtotal -->
                    <td>
                        <a href="{% url 'products:remove' product.product.id %}">Remove</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <div class="total-cost">
            <h3>Total: {{ total_cost }}</h3>
        </div>
    {% else %}
        <p>Your shopping cart is empty.</p>
    {% endif %}
{% endblock content %}

{% comment %}
 To the bottom of the body tag 
{% endcomment %}
{% block extrabody %}
{% endblock extrabody %}


{% comment %}
 JS tag injection 
{% endcomment %}
{% block js_inpage %}
{% endblock js_inpage %}